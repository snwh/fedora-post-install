#!/bin/bash

#----- DECLARATIONS -----#

dir="$(dirname "$0")"

#----- FUNCTIONS -----#

. $dir/functions/sublime3

# THIRD PARTY APPLICATIONS
function thirdparty {
echo ''
show_info 'What would you like to install?'
echo ''
echo '1. Google Chrome?'
echo '2. Google Talk Plugin?'
echo '3. Nautilus Dropbox?'
echo '4. Sublime Text?'
echo '5. Adobe Flash Player?'
echo 'r. Return'
echo ''
show_info 'Enter your choice:' && read REPLY
case $REPLY in
# Google Chrome
1) 
    echo 'Downloading Google Chrome...'
    cd $HOME/Downloads
    # Download RPM file that matches system architecture
    if [ $(uname -i) = 'i386' ]; then
        curl -O https://dl.google.com/linux/direct/google-chrome-stable_current_i386.rpm
    elif [ $(uname -i) = 'x86_64' ]; then
        curl -O https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
    fi
    # Install package(s)
    echo 'Installing Google Chrome...'
    show_info 'Requires root privileges:'
    sudo dnf --nogpgcheck install -y google-chrome*.rpm
    # Cleanup and finish
    rm google-chrome*.rpm
    cd
    show_success 'Done.'
    thirdparty
    ;;
# Google Talk Plugin
2)
    echo 'Downloading Google Talk Plugin...'
    cd $HOME/Downloads
    # Download RPM file that matches system architecture
    if [ $(uname -i) = 'i386' ]; then
        curl -O https://dl.google.com/linux/direct/google-talkplugin_current_i386.rpm
    elif [ $(uname -i) = 'x86_64' ]; then
        curl -O https://dl.google.com/linux/direct/google-talkplugin_current_x86_64.rpm
    fi
    # Install package(s)
    echo 'Installing Google Talk Plugin...'
    show_info 'Requires root privileges:'
    sudo dnf --nogpgcheck install -y google-talkplugin_current*.rpm
    # Cleanup and finish
    rm google-talkplugin_current*.rpm
    cd
    show_success 'Done.'
    thirdparty
    ;;
# Dropbox
3)
    echo 'Downloading Dropbox...'
    cd $HOME/Downloads
    # Download RPM file that matches system architecture
    if [ $(uname -i) = 'i386' ]; then
        curl -O https://linux.dropbox.com/packages/fedora/nautilus-dropbox-1.6.0-1.fedora.i386.rpm
    elif [ $(uname -i) = 'x86_64' ]; then
        curl -O https://linux.dropbox.com/packages/fedora/nautilus-dropbox-1.6.0-1.fedora.x86_64.rpm
    fi
    # Install package(s)
    echo 'Installing Dropbox...'
    show_info 'Requires root privileges:'
    sudo dnf --nogpgcheck install -y nautilus-dropbox-*.rpm
    # Cleanup and finish
    rm nautilus-dropbox-*.rpm
    cd
    show_success 'Done.'
    thirdparty
    ;;
# Sublime Text 3
4)
    sublime3
    thirdparty
    ;;
# Adobe Flash Player
# See https://ask.fedoraproject.org/en/question/10217/sticky-how-do-i-install-adobe-flash-on-fedora/
5)
    echo 'Installing Adobe Repository and Adobe flash player...'
    # Download RPM file that matches system architecture
    if [ $(uname -m) = 'i386' ]; then
        show_info 'Requires root privileges:'
        su -c 'dnf -y install http://linuxdownload.adobe.com/adobe-release/adobe-release-i386-1.0-1.noarch.rpm && dnf -y install flash-plugin'
    elif [ $(uname -m) = 'x86_64' ]; then
        show_info 'Requires root privileges:'
        su -c 'dnf -y install http://linuxdownload.adobe.com/adobe-release/adobe-release-x86_64-1.0-1.noarch.rpm && dnf -y install flash-plugin'
    else
        echo 'Architecture not supported'
    fi
    show_success 'Done.'
    thirdparty
    ;;
# Return
[Rr]*) 
    clear && main;;
# Invalid choice
* ) 
    clear && echo 'Not an option, try again.' && thirdparty;;
esac
}
